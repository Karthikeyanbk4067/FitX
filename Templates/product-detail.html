<!DOCTYPE html>
 <html lang="en">
 <head>
     <meta charset="UTF-8">
     <title>{{ product.name }} - FITX</title>
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
     <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
     <link rel="preconnect" href="https://fonts.googleapis.com">
     <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
     <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
     
     <style>
         /* --- MODERN & RESPONSIVE PRODUCT PAGE STYLES --- */
         :root {
             --primary-purple: #000000;
             --light-bg: #f8f9fa;
             --surface-color: #ffffff;
             --text-color: #212529;
             --secondary-text: #6c757d;
             --border-color: #dee2e6;
         }
 

         body {
             font-family: 'Inter', sans-serif;
             background-color: var(--light-bg);
             color: var(--text-color);
             padding-top: 2rem;
             padding-bottom: 4rem;
         }
 

         .product-container-modern {
             max-width: 1200px;
             margin: auto;
             display: grid;
             grid-template-columns: 1.1fr 0.9fr;
             gap: 3rem;
             padding: 2rem; /* Add padding around the container */
             background-color: var(--surface-color); /* Set a background color */
             border-radius: 1.5rem; /* Add rounded corners */
             box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08); /* Subtle shadow for depth */
         }
 

         /* --- Image Gallery --- */
         .image-gallery {
             display: flex;
             flex-direction: column;
             gap: 1rem;
         }
         .main-image-wrapper {
             background-color: var(--surface-color);
             border: 1px solid var(--border-color);
             border-radius: 1rem;
             overflow: hidden; /* Important for zoom effect */
             box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* Add subtle shadow */
         }
         .main-image-wrapper img {
             width: 100%;
             height: auto;
             aspect-ratio: 1/1;
             object-fit: contain;
             transition: transform 0.3s ease; /* Smooth transition for zoom */
         }
         /* Desktop-only zoom effect */
         @media (min-width: 992px) {
             .main-image-wrapper:hover img {
                 transform: scale(1.1);
             }
         }
         .thumbnail-scroller {
             display: grid;
             grid-template-columns: repeat(5, 1fr);
             gap: 1rem;
         }
         .thumbnail-scroller img {
             width: 100%;
             height: auto;
             aspect-ratio: 1/1;
             object-fit: cover;
             border-radius: 0.5rem;
             cursor: pointer;
             border: 2px solid transparent;
             transition: all 0.3s ease;
         }
         .thumbnail-scroller img:hover {
             border-color: var(--primary-purple);
         }
         .thumbnail-scroller img.selected {
             border-color: var(--primary-purple);
             box-shadow: 0 0 10px rgba(106, 13, 173, 0.3);
         }
 

         /* --- Product Details --- */
         .product-details-modern {
             padding-top: 1rem;
         }
         .product-category {
             color: var(--primary-purple);
             font-weight: 500;
             font-size: 0.9rem;
             text-transform: uppercase;
             letter-spacing: 0.5px;
             margin-bottom: 0.75rem;
         }
         .product-title-modern {
             font-size: 2.25rem;
             font-weight: 600;
             margin-bottom: 1rem;
             line-height: 1.2;
         }
         .product-price-modern {
             font-size: 1.5rem;
             font-weight: 500;
             margin-bottom: 0.25rem;
         }
         .product-price-modern .mrp {
             text-decoration: line-through;
             color: var(--secondary-text);
             font-size: 1.1rem;
             margin-left: 0.75rem;
         }
         .tax-info {
             font-size: 0.8rem;
             color: var(--secondary-text);
             margin-bottom: 1.5rem;
         }
 

         /* --- Description with Read More --- */
         .product-description {
             color: var(--secondary-text);
             margin-bottom: 2rem;
             font-size: 0.95rem;
             line-height: 1.6;
         }
         .product-description p {
             max-height: 65px; /* Show about 3 lines initially */
             overflow: hidden;
             position: relative;
             transition: max-height 0.4s ease-out;
         }
         .product-description p.expanded {
             max-height: 500px; /* Allow it to expand */
         }
         .read-more-btn {
             background: none;
             border: none;
             color: var(--primary-purple);
             font-weight: 600;
             padding: 0;
             cursor: pointer;
             text-decoration: underline;
         }
 

         /* --- Size Selection --- */
         .size-selection-modern .header {
             display: flex;
             justify-content: space-between;
             align-items: center;
             margin-bottom: 1rem;
         }
         .size-selection-modern .size-grid {
             display: grid;
             grid-template-columns: repeat(auto-fill, minmax(65px, 1fr));
             gap: 0.75rem;
             margin-bottom: 2rem;
         }
         .size-button {
             padding: 0.6rem;
             font-size: 0.9rem;
             border-radius: 8px;
             border: 1px solid var(--border-color);
             background-color: var(--surface-color);
             color: var(--text-color);
             cursor: pointer;
             text-align: center;
             transition: all 0.2s ease;
         }
         .size-button:hover {
             border-color: var(--text-color);
         }
         .size-button.selected {
             background-color: var(--text-color);
             color: #fff;
             border-color: var(--text-color);
         }
 

         /* --- Action Buttons --- */
         .action-buttons-modern {
             display: grid;
             grid-template-columns: 1fr;
             gap: 1rem;
             margin-bottom: 2rem;
         }
         .btn-modern {
             padding: 1rem;
             font-size: 1rem;
             font-weight: 600;
             border-radius: 12px;
             cursor: pointer;
             border: 1px solid transparent;
             transition: all 0.3s ease;
         }
         .btn-modern.btn-primary {
             background-color: var(--primary-purple);
             color: #fff;
         }
         .btn-modern.btn-primary:hover {
             background-color: black;
             box-shadow: 0 4px 15px black(106, 13, 173, 0.3);
         }
 

         /* --- Accordion --- */
         .accordion-modern {
             border-top: 1px solid var(--border-color);
         }
         .accordion-item-modern {
             border-bottom: 1px solid var(--border-color);
         }
         .accordion-header-modern {
             padding: 1.25rem 0;
             cursor: pointer;
             display: flex;
             justify-content: space-between;
             align-items: center;
             font-size: 1rem;
             font-weight: 500;
         }
         .accordion-header-modern i {
             transition: transform 0.3s ease;
         }
         .accordion-header-modern.active i {
             transform: rotate(180deg);
         }
         .accordion-content-modern {
             max-height: 0;
             overflow: hidden;
             transition: max-height 0.4s ease-out;
             color: var(--secondary-text);
             font-size: 0.9rem;
             line-height: 1.6;
         }
         
         /* --- RESPONSIVE DESIGN FOR MOBILE --- */
         @media (max-width: 991.98px) {
             .product-container-modern {
                 grid-template-columns: 1fr; /* Stack columns vertically */
                 gap: 2rem;
             }
             .product-title-modern {
                 font-size: 1.75rem; /* Smaller title on mobile */
             }
             .main-image-wrapper {
                 min-height: auto; /* Remove fixed height */
             }
             .thumbnail-scroller {
                 /* Make thumbnails scroll horizontally */
                 grid-template-columns: repeat(5, 20%); /* Each thumb is 20% width */
                 overflow-x: auto;
                 padding-bottom: 10px; /* Add space for scrollbar */
                 -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
             }
         }
     </style>
     <style>
         /* Wishlist Button Hover */
         #wishlistBtn:hover {
             background: #000;
             color: #fff;
         }
         #wishlistBtn:hover .bi-heart,
         #wishlistBtn:hover .bi-heart-fill {
             color: #fff;
         }
     </style>
 </head>
 <body>
     <div class="container">
     {% set wishlist = session.get('wishlist', []) %}
         <div class="product-container-modern">
             
             <!-- ====== IMAGE GALLERY ====== -->
             <div class="image-gallery">
                 <div class="main-image-wrapper">
                     <img src="{{ url_for('static', filename=product.image_main) }}" alt="{{ product.name }} main image" id="mainImage">
                 </div>
                 <div class="thumbnail-scroller" id="thumbnails">
                     <img src="{{ url_for('static', filename=product.image_main) }}" alt="Thumbnail 1" class="selected">
                 </div>
             </div>
             
             <!-- ====== PRODUCT DETAILS ====== -->
             <div class="product-details-modern">
                 <p class="product-category">{{ product.category }}</p>
                 <h1 class="product-title-modern">{{ product.name }}</h1>
                 <div class="product-price-modern">
                     <span>₹ {{ "%.2f"|format(product.price) }}</span>
                     <span class="mrp">₹ {{ "%.2f"|format(product.mrp) }}</span>
                 </div>
                 <p class="tax-info">Inclusive of all taxes</p>
 

                 <div class="product-description">
                     <p id="productDescription">{{ product.description }}</p>
                     <button id="readMoreBtn" class="read-more-btn">Read More</button>
                 </div>
 

 

                 <div class="size-selection-modern">
                     <form action="{{ url_for('add_to_cart') }}" method="post" id="addToCartForm" class="mb-2">
                         <input type="hidden" name="product_id" value="{{ product.id }}">
                         <input type="hidden" name="selected_size" id="selectedSizeInput" required>
                         <div class="header">
                             <h3 class="fs-6 fw-semibold">SELECT SIZE</h3>
                             <a href="#" class="text-secondary text-decoration-none fs-6">Size Guide</a>
                         </div>
                         <div class="size-grid" id="sizeGrid">
                             <button type="button" class="size-button" data-size="UK 7">UK 7</button>
                             <button type="button" class="size-button" data-size="UK 8">UK 8</button>
                             <button type="button" class="size-button" data-size="UK 9">UK 9</button>
                             <button type="button" class="size-button" data-size="UK 10">UK 10</button>
                             <button type="button" class="size-button" data-size="UK 11">UK 11</button>
                         </div>
                         <button type="submit" class="btn-modern btn-primary w-100">Add to Bag</button>
                     </form>
                     <!-- Wishlist Button -->
                     <form action="{{ url_for('add_to_wishlist') }}" method="post" id="wishlistForm">
                         <input type="hidden" name="product_id" value="{{ product.id }}">
                         <button type="submit" id="wishlistBtn" class="btn-modern w-100" style="background:#fff;color:#000;border:1px solid #000;display:flex;align-items:center;justify-content:center;gap:0.5rem;">
                             {% if product.id in (wishlist or []) %}
                                 <i class="bi bi-heart-fill" style="color:#000;font-size:1.3rem;"></i>
                                 <span>Added to Wishlist</span>
                             {% else %}
                                 <i class="bi bi-heart" style="color:#000;font-size:1.3rem;"></i>
                                 <span>Add to Wishlist</span>
                             {% endif %}
                         </button>
                     </form>
 

                 <div class="accordion-modern">
                     <div class="accordion-item-modern">
                         <div class="accordion-header-modern">
                             <span>Product Details</span>
                             <i class="bi bi-chevron-down"></i>
                         </div>
                         <div class="accordion-content-modern">
                             <ul class="list-unstyled ps-0">
                                 <li><strong>Style:</strong> {{ product.style_code }}</li>
                                 <li><strong>Country of Origin:</strong> {{ product.origin }}</li>
                             </ul>
                         </div>
                     </div>
                     <div class="accordion-item-modern">
                         <div class="accordion-header-modern">
                             <span>Delivery & Returns</span>
                             <i class="bi bi-chevron-down"></i>
                         </div>
                         <div class="accordion-content-modern">
                             <p>Free standard delivery on all orders. You can return your order for any reason, free of charge, within 30 days.</p>
                         </div>
                     </div>
                 </div>
             </div>
         </div>
     </div>
 

 <script>
     document.addEventListener('DOMContentLoaded', function() {
         // Thumbnail gallery functionality
         const mainImage = document.getElementById('mainImage');
         const thumbnails = document.getElementById('thumbnails');
         thumbnails.addEventListener('click', function(e) {
             if (e.target.tagName === 'IMG') {
                 mainImage.src = e.target.src;
                 thumbnails.querySelectorAll('img').forEach(img => img.classList.remove('selected'));
                 e.target.classList.add('selected');
             }
         });
 

         // Size selection functionality and form validation
         const sizeGrid = document.getElementById('sizeGrid');
         const selectedSizeInput = document.getElementById('selectedSizeInput');
         sizeGrid.addEventListener('click', function(e) {
             if (e.target.tagName === 'BUTTON') {
                 sizeGrid.querySelectorAll('.size-button').forEach(btn => btn.classList.remove('selected'));
                 e.target.classList.add('selected');
                 selectedSizeInput.value = e.target.dataset.size;
             }
         });
         const addToCartForm = document.getElementById('addToCartForm');
         addToCartForm.addEventListener('submit', function(e) {
             if (!selectedSizeInput.value) {
                 e.preventDefault();
                 alert('Please select a size before adding to cart.');
             }
         });
 

         // NEW: "Read More" for description
         const readMoreBtn = document.getElementById('readMoreBtn');
         const descriptionP = document.getElementById('productDescription');
         // Hide the button if content is short
         if (descriptionP.scrollHeight <= 65) {
             readMoreBtn.style.display = 'none';
         } else {
             readMoreBtn.addEventListener('click', function() {
                 descriptionP.classList.toggle('expanded');
                 if (descriptionP.classList.contains('expanded')) {
                     this.textContent = 'Read Less';
                 } else {
                     this.textContent = 'Read More';
                 }
             });
         }
         
         // Accordion functionality
         document.querySelectorAll('.accordion-header-modern').forEach(header => {
             header.addEventListener('click', () => {
                 const content = header.nextElementSibling;
                 header.classList.toggle('active');
                 if (content.style.maxHeight) {
                     content.style.maxHeight = null;
                 } else {
                     content.style.maxHeight = content.scrollHeight + "px";
                 }
             });
         });
     });
 

     // Wishlist button disables after click (optional, for feedback)
     const wishlistForm = document.getElementById('wishlistForm');
     if (wishlistForm) {
         wishlistForm.addEventListener('submit', function() {
             const btn = document.getElementById('wishlistBtn');
             btn.disabled = true;
             btn.innerHTML = '<i class="bi bi-heart-fill"></i> Added to Wishlist';
         });
     }
 </script>
 </body>
 </html>